{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{getCSRFToken}from'../auth/AuthUtils';import axiosInstance from\"../auth/AuthUtils\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_URL;const Cart=()=>{const[cartItems,setCartItems]=useState([]);const[totalPrice,setTotalPrice]=useState(0);const[profile,setProfile]=useState(null);// ✅ Store user details\nconst[addresses,setAddresses]=useState([]);// ✅ Store addresses from API\nconst[selectedAddress,setSelectedAddress]=useState(null);const[editingAddress,setEditingAddress]=useState(null);// ✅ Store editing address\nconst navigate=useNavigate();useEffect(()=>{loadCartItems();fetchProfile();// ✅ Fetch user details and addresses\n},[]);// ✅ Load Cart Items from Local Storage\nconst loadCartItems=()=>{const storedCartItems=JSON.parse(localStorage.getItem(\"cart\"))||[];console.log(\"🔹 Cart Items (Before Fix):\",storedCartItems);const updatedCartItems=storedCartItems.map(item=>{let imagePath=item.image;// ✅ Strip API_BASE_URL if it's present\nif(imagePath.startsWith(API_BASE_URL)){imagePath=imagePath.replace(API_BASE_URL,\"\");// Remove full URL\n}// ✅ Ensure image follows the correct relative path format: /images/products/Apple.jpg\nif(!imagePath.startsWith(\"/images/products/\")){const formattedName=item.name.replace(/\\s+/g,\"\").trim();// ✅ Remove spaces\nimagePath=`/images/products/${formattedName}.jpg`;// ✅ Final correct format\n}return{...item,image:imagePath// ✅ Save the correct relative path\n};});console.log(\"✅ Cart Items (After Fix):\",updatedCartItems);setCartItems(updatedCartItems);// ✅ Overwrite localStorage with fixed image paths\nlocalStorage.setItem(\"cart\",JSON.stringify(updatedCartItems));const total=updatedCartItems.reduce((sum,item)=>sum+item.price*item.quantity,0);setTotalPrice(total);};// ✅ Fetch User Profile and Addresses\nconst fetchProfile=async()=>{console.log(\"🔄 Fetching profile...\");try{const csrfToken=await getCSRFToken();const authToken=localStorage.getItem(\"authToken\");const response=await axiosInstance.get(`/api/auth/profile/`,{withCredentials:true,headers:{\"X-CSRFToken\":csrfToken,\"Authorization\":authToken?`Token ${authToken}`:\"\",\"Content-Type\":\"application/json\"}});console.log(\"✅ Profile Data:\",response.data);// ✅ Store profile data (excluding orders)\nsetProfile({name:response.data.name||\"Unknown\",email:response.data.email||\"No email available\",phone:response.data.phone_number||\"No phone available\"});// ✅ Store addresses\nsetAddresses(response.data.addresses||[]);if(response.data.addresses.length>0){setSelectedAddress(response.data.addresses[0].id);}}catch(error){var _error$response;console.error(\"🚨 Error fetching profile:\",((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error);alert(\"Error loading profile. Please check authentication.\");setProfile(null);setAddresses([]);// Ensure addresses is an array to avoid `.map()` errors\n}};// ✅ Handle Address Selection\nconst handleAddressChange=e=>{setSelectedAddress(e.target.value);};// ✅ Enable Address Editing\nconst startEditing=address=>{setEditingAddress({...address});};// ✅ Handle Address Input Change\nconst handleEditChange=e=>{const{name,value}=e.target;setEditingAddress(prev=>({...prev,[name]:value}));};const saveEditedAddress=async()=>{if(!editingAddress)return;try{const csrfToken=await getCSRFToken();const authToken=localStorage.getItem(\"authToken\");const response=await axios.put(`/api/auth/update-address/${editingAddress.id}/`,editingAddress,{headers:{\"X-CSRFToken\":csrfToken,\"Authorization\":authToken?`Token ${authToken}`:\"\",\"Content-Type\":\"application/json\"},withCredentials:true});console.log(\"✅ Address Updated:\",response.data);// ✅ Update address in frontend state after successful API update\nconst updatedAddresses=addresses.map(addr=>addr.id===editingAddress.id?editingAddress:addr);setAddresses(updatedAddresses);setEditingAddress(null);alert(\"✅ Address updated successfully!\");}catch(error){var _error$response2;console.error(\"🚨 Error updating address:\",((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||error);alert(\"❌ Failed to update address. Try again.\");}};const updateQuantity=(productId,newQuantity)=>{if(newQuantity<1)return;// ✅ Prevent negative quantity\nlet updatedCart=cartItems.map(item=>item.id===productId?{...item,quantity:newQuantity}:item);localStorage.setItem(\"cart\",JSON.stringify(updatedCart));// ✅ Update `localStorage`\nsetCartItems(updatedCart);};const removeFromCart=productId=>{let updatedCart=cartItems.filter(item=>item.id!==productId);localStorage.setItem(\"cart\",JSON.stringify(updatedCart));// ✅ Update `localStorage`\nsetCartItems(updatedCart);};const buttonStyle={margin:\"0 5px\",padding:\"5px 10px\",fontSize:\"16px\",cursor:\"pointer\",border:\"1px solid #ccc\",backgroundColor:\"#f8f8f8\",borderRadius:\"5px\"};const removeButtonStyle={marginTop:\"10px\",padding:\"5px 15px\",fontSize:\"16px\",backgroundColor:\"#ff4d4d\",color:\"white\",border:\"none\",cursor:\"pointer\",borderRadius:\"5px\"};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Cart\"}),profile?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",profile.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profile.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",profile.phone]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading user details...\"}),cartItems.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Your cart is empty.\"}):/*#__PURE__*/_jsxs(\"div\",{children:[cartItems.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",style:{display:'flex',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"img\",{src:item.image||\"/images/products/Default.jpg\"// ✅ Same logic as Checkout.js\n,alt:item.name||\"Product\",width:\"100\",height:\"100\",style:{marginRight:'20px',objectFit:'cover'},onError:e=>{}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity:\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateQuantity(item.id,item.quantity-1),children:\"-\"}),item.quantity,/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateQuantity(item.id,item.quantity+1),children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.id),style:removeButtonStyle,children:\"Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flexGrow:1},children:[/*#__PURE__*/_jsx(\"h3\",{children:item.name||`Product ${item.id}`}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \\u20B9\",item.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity: \",item.quantity]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total: \\u20B9\",(item.price*item.quantity).toFixed(2)]})]})]},index)),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Total Price: \\u20B9\",totalPrice.toFixed(2)]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(`/checkout?total_price=${totalPrice}&address_id=${selectedAddress}`),className:\"btn btn-success\",children:\"Checkout\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Select Address for Delivery\"}),addresses.length>0?/*#__PURE__*/_jsx(\"select\",{value:selectedAddress||'',onChange:handleAddressChange,id:\"address-select\",children:addresses.map(address=>/*#__PURE__*/_jsxs(\"option\",{value:address.id,children:[address.address_line1,\", \",address.city,\", \",address.state,\" - \",address.postal_code]},address.id))}):/*#__PURE__*/_jsxs(\"p\",{children:[\"No saved addresses. \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/add-address\"),children:\"Add Address\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Address\"}),editingAddress?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address_line1\",placeholder:\"Address Line 1\",value:editingAddress.address_line1,onChange:handleEditChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",placeholder:\"City\",value:editingAddress.city,onChange:handleEditChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"state\",placeholder:\"State\",value:editingAddress.state,onChange:handleEditChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"postal_code\",placeholder:\"Postal Code\",value:editingAddress.postal_code,onChange:handleEditChange}),/*#__PURE__*/_jsx(\"button\",{onClick:saveEditedAddress,children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingAddress(null),children:\"Cancel\"})]}):addresses.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditing(addresses[0]),children:\"Edit Address\"})]});};export default Cart;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","getCSRFToken","axiosInstance","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_URL","Cart","cartItems","setCartItems","totalPrice","setTotalPrice","profile","setProfile","addresses","setAddresses","selectedAddress","setSelectedAddress","editingAddress","setEditingAddress","navigate","loadCartItems","fetchProfile","storedCartItems","JSON","parse","localStorage","getItem","console","log","updatedCartItems","map","item","imagePath","image","startsWith","replace","formattedName","name","trim","setItem","stringify","total","reduce","sum","price","quantity","csrfToken","authToken","response","get","withCredentials","headers","data","email","phone","phone_number","length","id","error","_error$response","alert","handleAddressChange","e","target","value","startEditing","address","handleEditChange","prev","saveEditedAddress","put","updatedAddresses","addr","_error$response2","updateQuantity","productId","newQuantity","updatedCart","removeFromCart","filter","buttonStyle","margin","padding","fontSize","cursor","border","backgroundColor","borderRadius","removeButtonStyle","marginTop","color","children","index","className","style","display","alignItems","marginBottom","src","alt","width","height","marginRight","objectFit","onError","onClick","flexGrow","toFixed","onChange","address_line1","city","state","postal_code","type","placeholder"],"sources":["/Users/kunwarkanhaiyakamlakantpandey/Downloads/project of harit kranti/harit_aahar1/Harit_Aahar/frontend/src/pages/Cart.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { getCSRFToken } from '../auth/AuthUtils';\nimport axiosInstance from \"../auth/AuthUtils\";\nconst API_BASE_URL = process.env.REACT_APP_API_URL; \n\n\nconst Cart = () => {\n  const [cartItems, setCartItems] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [profile, setProfile] = useState(null); // ✅ Store user details\n  const [addresses, setAddresses] = useState([]); // ✅ Store addresses from API\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [editingAddress, setEditingAddress] = useState(null); // ✅ Store editing address\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    loadCartItems();\n    fetchProfile(); // ✅ Fetch user details and addresses\n  }, []);\n\n  // ✅ Load Cart Items from Local Storage\n  const loadCartItems = () => {\n    const storedCartItems = JSON.parse(localStorage.getItem(\"cart\")) || [];\n    console.log(\"🔹 Cart Items (Before Fix):\", storedCartItems);\n  \n    const updatedCartItems = storedCartItems.map((item) => {\n      let imagePath = item.image;\n  \n      // ✅ Strip API_BASE_URL if it's present\n      if (imagePath.startsWith(API_BASE_URL)) {\n        imagePath = imagePath.replace(API_BASE_URL, \"\"); // Remove full URL\n      }\n  \n      // ✅ Ensure image follows the correct relative path format: /images/products/Apple.jpg\n      if (!imagePath.startsWith(\"/images/products/\")) {\n        const formattedName = item.name.replace(/\\s+/g, \"\").trim(); // ✅ Remove spaces\n        imagePath = `/images/products/${formattedName}.jpg`; // ✅ Final correct format\n      }\n  \n      return {\n        ...item,\n        image: imagePath, // ✅ Save the correct relative path\n      };\n    });\n  \n    console.log(\"✅ Cart Items (After Fix):\", updatedCartItems);\n    setCartItems(updatedCartItems);\n  \n    // ✅ Overwrite localStorage with fixed image paths\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCartItems));\n  \n    const total = updatedCartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    setTotalPrice(total);\n  };\n  \n  // ✅ Fetch User Profile and Addresses\n  const fetchProfile = async () => {\n    console.log(\"🔄 Fetching profile...\");\n    try {\n      const csrfToken = await getCSRFToken();\n      const authToken = localStorage.getItem(\"authToken\");\n\n      const response = await axiosInstance.get(`/api/auth/profile/`, {\n        withCredentials: true,\n        headers: {\n          \"X-CSRFToken\": csrfToken,\n          \"Authorization\": authToken ? `Token ${authToken}` : \"\",\n          \"Content-Type\": \"application/json\",\n        },\n      });\n\n      console.log(\"✅ Profile Data:\", response.data);\n\n      // ✅ Store profile data (excluding orders)\n      setProfile({\n        name: response.data.name || \"Unknown\",\n        email: response.data.email || \"No email available\",\n        phone: response.data.phone_number || \"No phone available\",\n      });\n\n      // ✅ Store addresses\n      setAddresses(response.data.addresses || []);\n      if (response.data.addresses.length > 0) {\n        setSelectedAddress(response.data.addresses[0].id);\n      }\n    } catch (error) {\n      console.error(\"🚨 Error fetching profile:\", error.response?.data || error);\n      alert(\"Error loading profile. Please check authentication.\");\n      setProfile(null);\n      setAddresses([]); // Ensure addresses is an array to avoid `.map()` errors\n    }\n  };\n\n  // ✅ Handle Address Selection\n  const handleAddressChange = (e) => {\n    setSelectedAddress(e.target.value);\n  };\n\n  // ✅ Enable Address Editing\n  const startEditing = (address) => {\n    setEditingAddress({ ...address });\n  };\n\n  // ✅ Handle Address Input Change\n  const handleEditChange = (e) => {\n    const { name, value } = e.target;\n    setEditingAddress((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const saveEditedAddress = async () => {\n    if (!editingAddress) return;\n  \n    try {\n      const csrfToken = await getCSRFToken();\n      const authToken = localStorage.getItem(\"authToken\");\n  \n      const response = await axios.put(\n        `/api/auth/update-address/${editingAddress.id}/`,\n        editingAddress,\n        {\n          headers: {\n            \"X-CSRFToken\": csrfToken,\n            \"Authorization\": authToken ? `Token ${authToken}` : \"\",\n            \"Content-Type\": \"application/json\",\n          },\n          withCredentials: true,\n        }\n      );\n  \n      console.log(\"✅ Address Updated:\", response.data);\n  \n      // ✅ Update address in frontend state after successful API update\n      const updatedAddresses = addresses.map((addr) =>\n        addr.id === editingAddress.id ? editingAddress : addr\n      );\n      setAddresses(updatedAddresses);\n  \n      setEditingAddress(null);\n      alert(\"✅ Address updated successfully!\");\n    } catch (error) {\n      console.error(\"🚨 Error updating address:\", error.response?.data || error);\n      alert(\"❌ Failed to update address. Try again.\");\n    }\n  };\n\n\n  const updateQuantity = (productId, newQuantity) => {\n    if (newQuantity < 1) return; // ✅ Prevent negative quantity\n  \n    let updatedCart = cartItems.map((item) =>\n      item.id === productId ? { ...item, quantity: newQuantity } : item\n    );\n  \n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart)); // ✅ Update `localStorage`\n    setCartItems(updatedCart);\n  };\n  \n  const removeFromCart = (productId) => {\n    let updatedCart = cartItems.filter((item) => item.id !== productId);\n  \n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart)); // ✅ Update `localStorage`\n    setCartItems(updatedCart);\n  };\n  const buttonStyle = {\n    margin: \"0 5px\",\n    padding: \"5px 10px\",\n    fontSize: \"16px\",\n    cursor: \"pointer\",\n    border: \"1px solid #ccc\",\n    backgroundColor: \"#f8f8f8\",\n    borderRadius: \"5px\",\n  };\n  \n  const removeButtonStyle = {\n    marginTop: \"10px\",\n    padding: \"5px 15px\",\n    fontSize: \"16px\",\n    backgroundColor: \"#ff4d4d\",\n    color: \"white\",\n    border: \"none\",\n    cursor: \"pointer\",\n    borderRadius: \"5px\",\n  };\n  \n  return (\n    <div>\n      <h1>Your Cart</h1>\n\n      {/* ✅ User Details (Without Orders) */}\n      {profile ? (\n        <div>\n          <p><strong>Name:</strong> {profile.name}</p>\n          <p><strong>Email:</strong> {profile.email}</p>\n          <p><strong>Phone:</strong> {profile.phone}</p>\n        </div>\n      ) : (\n        <p>Loading user details...</p>\n      )}\n\n      {/* ✅ Cart Items */}\n      {cartItems.length === 0 ? (\n        <p>Your cart is empty.</p>\n      ) : (\n        <div>\n         {cartItems.map((item, index) => (\n  <div key={index} className=\"cart-item\" style={{ display: 'flex', alignItems: 'center', marginBottom: '20px' }}>\n    <img \n      src={item.image || \"/images/products/Default.jpg\"} // ✅ Same logic as Checkout.js\n      alt={item.name || \"Product\"} \n      width=\"100\" \n      height=\"100\" \n      style={{ marginRight: '20px', objectFit: 'cover' }} \n      onError={(e) => { \n        }} \n    />\n     {/* ✅ Add Quantity Controls */}\n     <p>\n            Quantity:\n            <button onClick={() => updateQuantity(item.id, item.quantity - 1)}>-</button>\n            {item.quantity}\n            <button onClick={() => updateQuantity(item.id, item.quantity + 1)}>+</button>\n            <button onClick={() => removeFromCart(item.id)} style={removeButtonStyle}>\n            Remove\n          </button>\n\n          </p>\n    <div style={{ flexGrow: 1 }}>\n      <h3>{item.name || `Product ${item.id}`}</h3>\n      <p>Price: ₹{item.price}</p>\n      <p>Quantity: {item.quantity}</p>\n      <p>Total: ₹{(item.price * item.quantity).toFixed(2)}</p>\n    </div>\n  </div>\n))}\n\n\n\n\n          <p><strong>Total Price: ₹{totalPrice.toFixed(2)}</strong></p>\n          <button onClick={() => navigate(`/checkout?total_price=${totalPrice}&address_id=${selectedAddress}`)} className=\"btn btn-success\">Checkout</button>\n        </div>\n      )}\n\n      {/* ✅ Address Selection */}\n      <h2>Select Address for Delivery</h2>\n      {addresses.length > 0 ? (\n        <select value={selectedAddress || ''} onChange={handleAddressChange} id=\"address-select\">\n          {addresses.map((address) => (\n            <option key={address.id} value={address.id}>\n              {address.address_line1}, {address.city}, {address.state} - {address.postal_code}\n            </option>\n          ))}\n        </select>\n      ) : (\n        <p>No saved addresses. <button onClick={() => navigate(\"/add-address\")}>Add Address</button></p>\n      )}\n\n      {/* ✅ Address Editing Section */}\n      <h2>Edit Address</h2>\n      {editingAddress ? (\n        <div>\n          <input\n            type=\"text\"\n            name=\"address_line1\"\n            placeholder=\"Address Line 1\"\n            value={editingAddress.address_line1}\n            onChange={handleEditChange}\n          />\n          <input\n            type=\"text\"\n            name=\"city\"\n            placeholder=\"City\"\n            value={editingAddress.city}\n            onChange={handleEditChange}\n          />\n          <input\n            type=\"text\"\n            name=\"state\"\n            placeholder=\"State\"\n            value={editingAddress.state}\n            onChange={handleEditChange}\n          />\n          <input\n            type=\"text\"\n            name=\"postal_code\"\n            placeholder=\"Postal Code\"\n            value={editingAddress.postal_code}\n            onChange={handleEditChange}\n          />\n          <button onClick={saveEditedAddress}>Save Changes</button>\n          <button onClick={() => setEditingAddress(null)}>Cancel</button>\n        </div>\n      ) : (\n        addresses.length > 0 && (\n          <button onClick={() => startEditing(addresses[0])}>Edit Address</button>\n        )\n      )}\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}