{"ast":null,"code":"import React,{useState}from'react';import{sendOTP,verifyOTP}from'../auth/AuthUtils';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Signup=()=>{const[userInfo,setUserInfo]=useState({name:'',phone:'',email:'',password:''});const[otp,setOTP]=useState('');const[otpSent,setOtpSent]=useState(false);const[verified,setVerified]=useState(false);const handleChange=e=>{const{name,value}=e.target;setUserInfo({...userInfo,[name]:value});};const handleSendOTP=async()=>{try{const response=await sendOTP(userInfo.phone);if(response.success){alert('OTP sent successfully!');setOtpSent(true);}else{alert('Failed to send OTP');}}catch(error){alert('Error sending OTP');}};const handleVerifyOTP=async()=>{try{const response=await verifyOTP(userInfo.phone,otp);if(response.success){alert('OTP verified successfully!');setVerified(true);}else{alert('Invalid OTP');}}catch(error){alert('Error verifying OTP');}};const handleSignup=async()=>{if(verified){try{const response=await axios.post('/api/auth/signup/',userInfo);if(response.data.success){alert('Signup successful!');}else{alert('Signup failed');}}catch(error){alert('Error during signup');}}else{alert('Please verify your OTP first.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Signup\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Name\",value:userInfo.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:userInfo.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",placeholder:\"Phone Number\",value:userInfo.phone,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:userInfo.password,onChange:handleChange,required:true}),!otpSent?/*#__PURE__*/_jsx(\"button\",{onClick:handleSendOTP,children:\"Send OTP\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter OTP\",value:otp,onChange:e=>setOTP(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{onClick:handleVerifyOTP,children:\"Verify OTP\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignup,disabled:!verified,children:\"Signup\"})]});};export default Signup;","map":{"version":3,"names":["React","useState","sendOTP","verifyOTP","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Signup","userInfo","setUserInfo","name","phone","email","password","otp","setOTP","otpSent","setOtpSent","verified","setVerified","handleChange","e","value","target","handleSendOTP","response","success","alert","error","handleVerifyOTP","handleSignup","axios","post","data","className","children","type","placeholder","onChange","required","onClick","disabled"],"sources":["/Users/kunwarkanhaiyakamlakantpandey/Downloads/project of harit kranti/harit_aahar1/frontend/src/auth/Signup.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { sendOTP, verifyOTP } from '../auth/AuthUtils';\n\nconst Signup = () => {\n  const [userInfo, setUserInfo] = useState({ name: '', phone: '', email: '', password: '' });\n  const [otp, setOTP] = useState('');\n  const [otpSent, setOtpSent] = useState(false);\n  const [verified, setVerified] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setUserInfo({ ...userInfo, [name]: value });\n  };\n\n  const handleSendOTP = async () => {\n    try {\n      const response = await sendOTP(userInfo.phone);\n      if (response.success) {\n        alert('OTP sent successfully!');\n        setOtpSent(true);\n      } else {\n        alert('Failed to send OTP');\n      }\n    } catch (error) {\n      alert('Error sending OTP');\n    }\n  };\n\n  const handleVerifyOTP = async () => {\n    try {\n      const response = await verifyOTP(userInfo.phone, otp);\n      if (response.success) {\n        alert('OTP verified successfully!');\n        setVerified(true);\n      } else {\n        alert('Invalid OTP');\n      }\n    } catch (error) {\n      alert('Error verifying OTP');\n    }\n  };\n\n  const handleSignup = async () => {\n    if (verified) {\n      try {\n        const response = await axios.post('/api/auth/signup/', userInfo);\n        if (response.data.success) {\n          alert('Signup successful!');\n        } else {\n          alert('Signup failed');\n        }\n      } catch (error) {\n        alert('Error during signup');\n      }\n    } else {\n      alert('Please verify your OTP first.');\n    }\n  };\n\n  return (\n    <div className=\"form-container\">\n      <h2>Signup</h2>\n      <input type=\"text\" name=\"name\" placeholder=\"Name\" value={userInfo.name} onChange={handleChange} required />\n      <input type=\"email\" name=\"email\" placeholder=\"Email\" value={userInfo.email} onChange={handleChange} required />\n      <input type=\"tel\" name=\"phone\" placeholder=\"Phone Number\" value={userInfo.phone} onChange={handleChange} required />\n      <input type=\"password\" name=\"password\" placeholder=\"Password\" value={userInfo.password} onChange={handleChange} required />\n      \n      {!otpSent ? (\n        <button onClick={handleSendOTP}>Send OTP</button>\n      ) : (\n        <>\n          <input type=\"text\" placeholder=\"Enter OTP\" value={otp} onChange={(e) => setOTP(e.target.value)} required />\n          <button onClick={handleVerifyOTP}>Verify OTP</button>\n        </>\n      )}\n\n      <button onClick={handleSignup} disabled={!verified}>Signup</button>\n    </div>\n  );\n};\n\nexport default Signup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}