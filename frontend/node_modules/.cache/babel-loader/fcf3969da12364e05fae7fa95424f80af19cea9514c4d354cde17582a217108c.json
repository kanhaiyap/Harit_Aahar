{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import'../assets/styles/style.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Products=()=>{const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const location=useLocation();// To access the search query from the URL\nuseEffect(()=>{fetch('http://127.0.0.1:8000/api/products/').then(response=>response.json()).then(data=>{setProducts(data);handleSearch(data);// Apply the search filter when products are fetched\n}).catch(error=>console.error('Error fetching products:',error));},[]);useEffect(()=>{handleSearch(products);// Re-run the filter when the search query changes\n},[location.search]);const handleSearch=allProducts=>{var _queryParams$get;const queryParams=new URLSearchParams(location.search);const searchQuery=((_queryParams$get=queryParams.get('search'))===null||_queryParams$get===void 0?void 0:_queryParams$get.toLowerCase())||'';if(searchQuery){// Filter products based on search query\nconst matchingProducts=allProducts.filter(product=>product.name.toLowerCase().includes(searchQuery)||product.description.toLowerCase().includes(searchQuery)||product.brand.toLowerCase().includes(searchQuery));// Combine matching products first, followed by non-matching ones\nconst nonMatchingProducts=allProducts.filter(product=>!matchingProducts.includes(product));setFilteredProducts([...matchingProducts,...nonMatchingProducts]);}else{// If no search query, display all products\nsetFilteredProducts(allProducts);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Our Products\"}),filteredProducts.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"ul\",{className:\"products-container\",children:filteredProducts.map((product,index)=>/*#__PURE__*/_jsxs(\"li\",{className:`product-box ${index===0?'highlight':''}`,children:[/*#__PURE__*/_jsx(\"img\",{src:`/images/products/${product.image.split('/').pop()}`,alt:product.name,className:\"product-image\"}),/*#__PURE__*/_jsx(\"h2\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \\u20B9\",product.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.addToCart(product.id,product.name,product.price,product.image),children:\"Add to Cart\"})]},product.id))})}),filteredProducts.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No matching products found. Showing all available products below:\"})]});};export default Products;","map":{"version":3,"names":["React","useState","useEffect","useLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Products","products","setProducts","filteredProducts","setFilteredProducts","location","fetch","then","response","json","data","handleSearch","catch","error","console","search","allProducts","_queryParams$get","queryParams","URLSearchParams","searchQuery","get","toLowerCase","matchingProducts","filter","product","name","includes","description","brand","nonMatchingProducts","children","length","className","map","index","src","image","split","pop","alt","price","onClick","window","addToCart","id"],"sources":["/Users/kunwarkanhaiyakamlakantpandey/Downloads/project of harit kranti/harit_aahar1/frontend/src/pages/Products.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport '../assets/styles/style.css';\n\nconst Products = () => {\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const location = useLocation();  // To access the search query from the URL\n\n  useEffect(() => {\n    fetch('http://127.0.0.1:8000/api/products/')\n      .then(response => response.json())\n      .then(data => {\n        setProducts(data);\n        handleSearch(data);  // Apply the search filter when products are fetched\n      })\n      .catch(error => console.error('Error fetching products:', error));\n  }, []);\n\n  useEffect(() => {\n    handleSearch(products);  // Re-run the filter when the search query changes\n  }, [location.search]);\n\n  const handleSearch = (allProducts) => {\n    const queryParams = new URLSearchParams(location.search);\n    const searchQuery = queryParams.get('search')?.toLowerCase() || '';\n\n    if (searchQuery) {\n      // Filter products based on search query\n      const matchingProducts = allProducts.filter(product =>\n        product.name.toLowerCase().includes(searchQuery) ||\n        product.description.toLowerCase().includes(searchQuery) ||\n        product.brand.toLowerCase().includes(searchQuery)\n      );\n\n      // Combine matching products first, followed by non-matching ones\n      const nonMatchingProducts = allProducts.filter(product =>\n        !matchingProducts.includes(product)\n      );\n\n      setFilteredProducts([...matchingProducts, ...nonMatchingProducts]);\n    } else {\n      // If no search query, display all products\n      setFilteredProducts(allProducts);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Our Products</h1>\n\n      {/* Display a message if no matching products are found */}\n      {filteredProducts.length > 0 && (\n        <>\n          <ul className=\"products-container\">\n            {filteredProducts.map((product, index) => (\n              <li key={product.id} className={`product-box ${index === 0 ? 'highlight' : ''}`}>\n                <img\n                  src={`/images/products/${product.image.split('/').pop()}`}\n                  alt={product.name}\n                  className=\"product-image\"\n                />\n                <h2>{product.name}</h2>\n                <p>{product.description}</p>\n                <p><strong>Price:</strong> â‚¹{product.price}</p>\n                <button onClick={() => window.addToCart(product.id, product.name, product.price, product.image)}>\n                  Add to Cart\n                </button>\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n\n      {/* Fallback when no matches are found */}\n      {filteredProducts.length === 0 && (\n        <p>No matching products found. Showing all available products below:</p>\n      )}\n    </div>\n  );\n};\n\nexport default Products;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}